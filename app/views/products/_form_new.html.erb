<% if params[:category_id] %>
  <%= form_for [@category, @product] do |f| %>
    <div class="field">
      <%= f.label :name %>
      <%= f.text_field :name %>
    </div>

    <div class="field">
      <%= f.label :description %>
      <%= f.text_area :description %>
    </div>

    <div class="field">
      <%= f.label :min_price %>
      <%= f.number_field :min_price %>
    </div>

    <div class="actions">
      <%= f.submit %>
    </div>
  <% end %>
  <%= link_to 'Back', category_path(@category) %>
<% else %>
  <%= form_with(model: @product, url: products_path, local: true) do |form| %>
  <div class="field">
    <%= form.label :name %>
    <%= form.text_field :name %>
  </div>
  <div class="field">
    <%= form.label :description %>
    <%= form.text_area :description %>
  </div>
  <div class="field">
    <%= form.label :price %>
    <%= form.text_field :price %>
  </div>
  <div class="field">
    <%= form.label :category_id %>
    <%= form.collection_select :category_id, @categories, :id, :name, prompt: 'Select a category' %>
  </div>
  <div class="actions">
    <%= form.submit 'Create Product' %>
  </div>
<% end %>
  <%= link_to 'Back', products_path %>
<% end %>
